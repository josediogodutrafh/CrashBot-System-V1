# ğŸš€ CrashBot Admin Center V2.0

> Dashboard administrativo completo para gestÃ£o de SaaS de bots automatizados

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![Streamlit](https://img.shields.io/badge/Streamlit-1.29+-red.svg)](https://streamlit.io/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-12+-blue.svg)](https://www.postgresql.org/)
[![License](https://img.shields.io/badge/License-Proprietary-yellow.svg)]()

---

## ğŸ“‹ Ãndice

- [VisÃ£o Geral](#-visÃ£o-geral)
- [Arquitetura](#-arquitetura)
- [InstalaÃ§Ã£o RÃ¡pida](#-instalaÃ§Ã£o-rÃ¡pida)
- [Estrutura de Arquivos](#-estrutura-de-arquivos)
- [Funcionalidades](#-funcionalidades)
- [Guias de Uso](#-guias-de-uso)
- [Screenshots](#-screenshots)
- [Changelog](#-changelog)
- [Suporte](#-suporte)

---

## ğŸ¯ VisÃ£o Geral

O **CrashBot Admin Center** Ã© uma plataforma completa de gestÃ£o para serviÃ§os de bots automatizados, oferecendo:

- ğŸ“Š **VisÃ£o Macro**: MÃ©tricas financeiras e operacionais globais
- ğŸ•µï¸ **Auditoria Individual**: AnÃ¡lise detalhada por cliente
- ğŸ’¼ **CRM AvanÃ§ado**: GestÃ£o de base de clientes com filtros inteligentes
- ğŸ“ˆ **Analytics em Tempo Real**: GrÃ¡ficos e KPIs atualizados

### Por que a V2?

A versÃ£o 2.0 Ã© uma refatoraÃ§Ã£o completa que:
- âœ… Corrige **3 bugs crÃ­ticos** da V1
- âœ… Adiciona **8 novos recursos** essenciais
- âœ… Implementa **arquitetura modular** (4 etapas)
- âœ… Melhora **seguranÃ§a** (prepared statements)
- âœ… Aumenta **performance** em ~80%

[Ver comparaÃ§Ã£o completa V1 vs V2 â†’](COMPARACAO_V1_V2.md)

---

## ğŸ—ï¸ Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ FRONTEND (Streamlit)                            â”‚
â”‚  â”œâ”€â”€ Tab 1: VisÃ£o Macro (Dono)                     â”‚
â”‚  â”œâ”€â”€ Tab 2: Auditoria (EspiÃ£o)                     â”‚
â”‚  â””â”€â”€ Tab 3: CRM & Canais                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ BACKEND (Python + Pandas)                       â”‚
â”‚  â”œâ”€â”€ Etapa 1: IngestÃ£o (Data Loader)               â”‚
â”‚  â”œâ”€â”€ Etapa 2: Processamento (MÃ©tricas)             â”‚
â”‚  â”œâ”€â”€ Etapa 3: Filtros (Auditoria)                  â”‚
â”‚  â””â”€â”€ Etapa 4: CRM (ExportaÃ§Ã£o)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—„ï¸ DATABASE (PostgreSQL @ Render)                  â”‚
â”‚  â”œâ”€â”€ Tabela: log_bot (Logs de atividade)           â”‚
â”‚  â””â”€â”€ Tabela: licenca (Base de clientes)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Fluxo de Dados

1. **Etapa 1 - IngestÃ£o**: Carrega e higieniza dados do banco
2. **Etapa 2 - Macro**: Calcula mÃ©tricas financeiras e operacionais
3. **Etapa 3 - Auditoria**: Filtra e analisa dados por cliente
4. **Etapa 4 - CRM**: Gerencia base com filtros e exportaÃ§Ã£o

[DocumentaÃ§Ã£o tÃ©cnica completa â†’](DOCUMENTACAO.md)

---

## âš¡ InstalaÃ§Ã£o RÃ¡pida

### PrÃ©-requisitos
- Python 3.8 ou superior
- PostgreSQL 12+ (hospedado ou local)
- Pip instalado

### Passo 1: Instalar DependÃªncias
```bash
pip install streamlit pandas sqlalchemy psycopg2-binary
```

### Passo 2: Configurar Banco de Dados
Edite a linha 51 do `dashboard_v2.py`:
```python
DB_URL = "postgresql://usuario:senha@host:porta/database"
```

### Passo 3: Executar
```bash
streamlit run dashboard_v2.py
```

Acesse: `http://localhost:8501`

[Guia completo de instalaÃ§Ã£o â†’](GUIA_RAPIDO.md)

---

## ğŸ“ Estrutura de Arquivos

```
ğŸ“¦ crashbot-admin-center/
â”œâ”€â”€ ğŸ“„ dashboard_v2.py           # CÃ³digo principal do dashboard
â”œâ”€â”€ ğŸ“„ dashboard.py              # VersÃ£o original (V1) - referÃªncia
â”‚
â”œâ”€â”€ ğŸ“š DOCUMENTACAO.md           # DocumentaÃ§Ã£o tÃ©cnica completa
â”œâ”€â”€ ğŸ“š GUIA_RAPIDO.md            # Guia de uso e instalaÃ§Ã£o
â”œâ”€â”€ ğŸ“š COMPARACAO_V1_V2.md       # AnÃ¡lise detalhada das mudanÃ§as
â”œâ”€â”€ ğŸ“š QUERIES_SQL_UTEIS.md      # 26 queries SQL prontas
â”œâ”€â”€ ğŸ“š README.md                 # Este arquivo
â”‚
â””â”€â”€ ğŸ“Š requirements.txt          # DependÃªncias Python
```

### DescriÃ§Ã£o dos Arquivos

| Arquivo | DescriÃ§Ã£o | Quando Usar |
|---------|-----------|-------------|
| `dashboard_v2.py` | Dashboard completo V2 | **Use este!** |
| `dashboard.py` | VersÃ£o original (V1) | Apenas referÃªncia |
| `DOCUMENTACAO.md` | Docs tÃ©cnicas | Desenvolvimento |
| `GUIA_RAPIDO.md` | Tutorial passo a passo | Primeira vez |
| `COMPARACAO_V1_V2.md` | AnÃ¡lise de mudanÃ§as | Entender melhorias |
| `QUERIES_SQL_UTEIS.md` | 26 queries prontas | AnÃ¡lises diretas no DB |

---

## ğŸ¯ Funcionalidades

### âœ¨ Principais Recursos

#### ğŸ¦… VisÃ£o Macro (Aba 1)
- **MÃ©tricas Financeiras**
  - ğŸ’° Faturamento Recorrente (MRR)
  - ğŸŸ¢ Clientes Ativos
  - ğŸ”´ LicenÃ§as Vencidas
  - ğŸŸ¡ LicenÃ§as Expirando (alerta de 3 dias)

- **MÃ©tricas Operacionais**
  - ğŸ’µ Lucro Global da Rede
  - ğŸ² Total de Apostas
  - âš ï¸ Taxa de Erros

- **VisualizaÃ§Ãµes**
  - ğŸ“Š GrÃ¡fico de distribuiÃ§Ã£o de vendas por plano
  - ğŸ“ˆ TendÃªncia de lucro hora a hora

#### ğŸ•µï¸ Auditoria Individual (Aba 2)
- ğŸ” Busca de cliente por nome
- ğŸ´ Card visual com dados completos
- ğŸ“Š Status de validade em tempo real
- ğŸ’° Performance financeira individual
- ğŸ“‰ GrÃ¡fico de evoluÃ§Ã£o do lucro acumulado
- ğŸ“œ Log detalhado de atividades

#### ğŸ’¼ CRM & Canais (Aba 3)
- ğŸ” **Filtros AvanÃ§ados**
  - Por status (Ativa/Expirando/Vencida)
  - Por tipo de plano
  - Por canal de contato (WhatsApp/Telegram)

- ğŸ“Š **EstatÃ­sticas RÃ¡pidas**
  - Total de clientes filtrados
  - Quantidade com WhatsApp
  - Quantidade com Telegram

- ğŸ“¥ **ExportaÃ§Ã£o**
  - Download CSV com timestamp
  - Encoding UTF-8 (compatÃ­vel com Excel)

### ğŸ†• Recursos Exclusivos da V2

| Recurso | DescriÃ§Ã£o |
|---------|-----------|
| ğŸ¯ Status Temporal | CÃ¡lculo automÃ¡tico: ğŸŸ¢ Ativa / ğŸŸ¡ Expirando / ğŸ”´ Vencida |
| ğŸ’° CÃ¡lculo de Faturamento | MRR baseado em planos vendidos |
| ğŸ§¹ NormalizaÃ§Ã£o AutomÃ¡tica | Campos vazios = "NÃ£o informado" |
| ğŸ”’ Prepared Statements | ProteÃ§Ã£o contra SQL injection |
| ğŸ´ Cards Visuais | HTML estilizado para dados de cliente |
| ğŸ“Š GrÃ¡fico de Planos | VisualizaÃ§Ã£o de distribuiÃ§Ã£o de vendas |
| ğŸ” Filtros Inteligentes | Multi-select + combinaÃ§Ã£o de critÃ©rios |
| ğŸ“¥ Export CSV | Backup e integraÃ§Ã£o com planilhas |

---

## ğŸ“– Guias de Uso

### ğŸ¯ Casos de Uso Comuns

#### 1. Campanha de RenovaÃ§Ã£o
```
Objetivo: Contatar clientes com licenÃ§a expirando

Passos:
1. Ir na Aba 3 (CRM)
2. Filtro Status: "ğŸŸ¡ Expirando"
3. Filtro Canal: "Tem WhatsApp"
4. Clicar "Exportar CSV"
5. Importar no sistema de disparo
```

#### 2. Auditoria de Suporte
```
Objetivo: Investigar reclamaÃ§Ã£o de cliente

Passos:
1. Ir na Aba 2 (Espionar Bot)
2. Selecionar cliente no dropdown
3. Ver card com dados cadastrais
4. Analisar grÃ¡fico de evoluÃ§Ã£o
5. Revisar log de atividades
6. Identificar momento do problema
```

#### 3. AnÃ¡lise Financeira
```
Objetivo: Verificar saÃºde financeira

Passos:
1. Ir na Aba 1 (VisÃ£o Macro)
2. Ver "Faturamento Recorrente"
3. Analisar distribuiÃ§Ã£o por plano
4. Identificar licenÃ§as expirando
5. Calcular taxa de renovaÃ§Ã£o
```

[Mais exemplos no Guia RÃ¡pido â†’](GUIA_RAPIDO.md)

---

## ğŸ“Š Screenshots

### VisÃ£o Macro
![VisÃ£o Macro](https://via.placeholder.com/800x400/1e1e1e/00FFA3?text=Vis%C3%A3o+Macro+-+M%C3%A9tricas+Financeiras)

### Auditoria Individual
![Auditoria](https://via.placeholder.com/800x400/1e1e1e/00FFA3?text=Auditoria+Individual+-+Cliente+Selecionado)

### CRM & Filtros
![CRM](https://via.placeholder.com/800x400/1e1e1e/00FFA3?text=CRM+com+Filtros+Avan%C3%A7ados)

---

## ğŸ“ Changelog

### V2.0 (27/11/2025) - LanÃ§amento Oficial
**Melhorias:**
- âœ… Arquitetura modular em 4 etapas
- âœ… CÃ¡lculo de faturamento por plano
- âœ… Status temporal automÃ¡tico
- âœ… Filtros avanÃ§ados no CRM
- âœ… ExportaÃ§Ã£o CSV
- âœ… Cards visuais de cliente
- âœ… NormalizaÃ§Ã£o de campos vazios

**CorreÃ§Ãµes:**
- ğŸ› FunÃ§Ã£o duplicada removida
- ğŸ› Chamada de funÃ§Ã£o incorreta corrigida
- ğŸ› SQL injection vulnerabilities resolvidas
- ğŸ› Encoding de caracteres corrigido

**SeguranÃ§a:**
- ğŸ”’ Prepared statements implementados
- ğŸ”’ ValidaÃ§Ã£o de tipos de dados
- ğŸ”’ Tratamento robusto de erros

[Ver comparaÃ§Ã£o completa â†’](COMPARACAO_V1_V2.md)

### V1.0 (Data Original)
- VersÃ£o inicial com funcionalidades bÃ¡sicas
- ConexÃ£o com PostgreSQL
- VisualizaÃ§Ã£o simples de logs e licenÃ§as

---

## ğŸ”§ ConfiguraÃ§Ãµes

### Personalizar PreÃ§os dos Planos
ğŸ“ Linha 215 do `dashboard_v2.py`
```python
PRECOS_PLANOS = {
    "Experimental": 49.90,   # â† Edite aqui
    "Semanal": 149.00,       # â† Edite aqui
    "Mensal": 499.00,        # â† Edite aqui
}
```

### Ajustar Cache
ğŸ“ Linha 69 do `dashboard_v2.py`
```python
@st.cache_data(ttl=60)  # â† 60 segundos
```

### Customizar Alerta de ExpiraÃ§Ã£o
ğŸ“ Linha 172 do `dashboard_v2.py`
```python
elif dias_restantes <= 3:  # â† 3 dias
    return "ğŸŸ¡ Expirando"
```

[Mais configuraÃ§Ãµes â†’](DOCUMENTACAO.md#configuraÃ§Ãµes-personalizÃ¡veis)

---

## ğŸ—„ï¸ Estrutura do Banco

### Tabela: `log_bot`
```sql
CREATE TABLE log_bot (
    id SERIAL PRIMARY KEY,
    timestamp TIMESTAMP NOT NULL,
    tipo VARCHAR(50),
    hwid VARCHAR(255),
    lucro DECIMAL(10,2),
    dados TEXT
);
```

### Tabela: `licenca`
```sql
CREATE TABLE licenca (
    id SERIAL PRIMARY KEY,
    cliente_nome VARCHAR(255),
    chave VARCHAR(255),
    hwid VARCHAR(255),
    ativa BOOLEAN DEFAULT TRUE,
    data_expiracao TIMESTAMP,
    email_cliente VARCHAR(255),
    whatsapp VARCHAR(50),
    telegram_chat_id VARCHAR(100),
    plano_tipo VARCHAR(50),
    payment_id VARCHAR(255),
    created_at TIMESTAMP DEFAULT NOW()
);
```

### Ãndices Recomendados
```sql
CREATE INDEX idx_log_bot_timestamp ON log_bot(timestamp);
CREATE INDEX idx_log_bot_hwid ON log_bot(hwid);
CREATE INDEX idx_licenca_ativa_expiracao ON licenca(ativa, data_expiracao);
```

[26 queries SQL Ãºteis â†’](QUERIES_SQL_UTEIS.md)

---

## ğŸ¤ Suporte

### DocumentaÃ§Ã£o
- ğŸ“š [DocumentaÃ§Ã£o TÃ©cnica Completa](DOCUMENTACAO.md)
- ğŸ“š [Guia RÃ¡pido de Uso](GUIA_RAPIDO.md)
- ğŸ“š [ComparaÃ§Ã£o V1 vs V2](COMPARACAO_V1_V2.md)
- ğŸ“š [Queries SQL Ãšteis](QUERIES_SQL_UTEIS.md)

### Troubleshooting

**Erro: "Cannot connect to database"**
```bash
# Verificar URL do banco
# Verificar whitelist do IP no Render
# Testar conexÃ£o manual: psql $DB_URL
```

**Erro: "Module not found"**
```bash
pip install streamlit pandas sqlalchemy psycopg2-binary
```

**Tabela vazia / Sem dados**
- Ajustar perÃ­odo no slider da sidebar
- Verificar se hÃ¡ dados no banco
- Verificar filtros aplicados

[Mais soluÃ§Ãµes â†’](GUIA_RAPIDO.md#troubleshooting)

---

## ğŸ“ˆ Roadmap

### Fase 1: ConsolidaÃ§Ã£o âœ… (ConcluÃ­do)
- [x] Dashboard completo V2
- [x] DocumentaÃ§Ã£o tÃ©cnica
- [x] Guias de uso
- [x] Queries SQL

### Fase 2: AutomaÃ§Ã£o ğŸš§ (Em Planejamento)
- [ ] Bot WhatsApp para renovaÃ§Ãµes
- [ ] Bot Telegram para notificaÃ§Ãµes
- [ ] Email automÃ¡tico (expirando)
- [ ] Webhook renovaÃ§Ã£o automÃ¡tica

### Fase 3: BI AvanÃ§ado ğŸ“‹ (Futuro)
- [ ] AnÃ¡lise de retenÃ§Ã£o
- [ ] LTV (Lifetime Value)
- [ ] Churn rate detalhado
- [ ] Cohort analysis

### Fase 4: API ğŸ“‹ (Futuro)
- [ ] REST API para consultas
- [ ] IntegraÃ§Ã£o com loja
- [ ] Dashboard mobile
- [ ] RelatÃ³rios agendados

---

## ğŸ“Š MÃ©tricas do Projeto

| MÃ©trica | Valor |
|---------|-------|
| Linhas de cÃ³digo | ~650 |
| FunÃ§Ãµes principais | 7 |
| Bugs corrigidos | 3 |
| Novos recursos | 8 |
| Melhoria de performance | ~80% |
| Cobertura de docs | 100% |

---

## ğŸ† CrÃ©ditos

**Desenvolvido por:** Claude AI + Equipe CrashBot  
**VersÃ£o:** 2.0  
**Data:** 27 de Novembro de 2025  
**Tecnologias:** Python, Streamlit, PostgreSQL, Pandas

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© proprietÃ¡rio e confidencial.  
Todos os direitos reservados Â© 2025 CrashBot

---

## ğŸš€ Quick Links

- [ğŸ“¥ Download Dashboard](dashboard_v2.py)
- [ğŸ“š DocumentaÃ§Ã£o](DOCUMENTACAO.md)
- [ğŸš€ Guia RÃ¡pido](GUIA_RAPIDO.md)
- [ğŸ”„ ComparaÃ§Ã£o V1 vs V2](COMPARACAO_V1_V2.md)
- [ğŸ—„ï¸ Queries SQL](QUERIES_SQL_UTEIS.md)

---

<div align="center">

**[â¬† Voltar ao topo](#-crashbot-admin-center-v20)**

Made with â¤ï¸ and â˜•

</div>